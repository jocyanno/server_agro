generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  user
  admin
}

enum StatusOcorrencia {
  EM_ANALISE
  VISTORIA_AGENDADA
  VISTORIA_REALIZADA
  SINISTRO_CONFIRMADO
  SINISTRO_NAO_CONFIRMADO
  INDENIZACAO_PAGA
  ARQUIVADO
}

enum StatusInicialAgro {
  EM_ANALISE
  VISTORIA_AGENDADA
  VISTORIA_REALIZADA
}

enum StatusFinalAgro {
  SINISTRO_CONFIRMADO
  NAO_COBERTO
  INDENIZACAO_PAGA
  ARQUIVADO
}

enum EventoClimatico {
  EXCESSO_CHUVA
  SECA
  GRANIZO
  GEADA
  VENDAVAL
  INCENDIO
  PRAGA
  DOENCA
}

model Users {
  id        Int      @id @default(autoincrement())
  name      String?
  email     String   @unique
  password  String
  role      Role     @default(user)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model DadosApac {
  id        Int      @id @default(autoincrement())
  data      DateTime
  regiao    String
  tendencia String
  min       Int
  max       Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("dados_apac")
}

model DadosCemaden {
  id          Int      @id @default(autoincrement())
  codEstacao  String?  @map("cod_estacao")
  nomeEstacao String   @map("nome_estacao")
  uf          String
  lat         String
  lon         String
  data        DateTime
  valorMedida Float    @map("valor_medida")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([codEstacao, data], name: "idx_cod_estacao")
  @@map("dados_cemaden")
}

model Seguradora {
  id                     String           @id @default(cuid())
  numeroOcorrencia       Int              @unique @default(autoincrement())
  dataHoraRegistro       DateTime
  tipoEvento             String
  localizacao            String
  descricaoInicial       String
  status                 StatusOcorrencia @default(EM_ANALISE)
  documentacaoRecebida   String?
  vistoriadorResponsavel String?
  conclusaoVistoria      String?
  valorIndenizacao       Float?
  createdAt              DateTime         @default(now())
  updatedAt              DateTime         @updatedAt

  @@index([numeroOcorrencia])
  @@index([dataHoraRegistro])
  @@index([status])
  @@map("seguradora")
}

model OcorrenciaAgricola {
  id                 String            @id @default(cuid())
  numeroOcorrencia   Int               @unique @default(autoincrement())
  produtor           String
  codigoPropriedade  String
  culturaAfetada     String
  areaPlantada       Float
  eventoClimatico    EventoClimatico
  dataInicioEvento   DateTime
  dataFimEvento      DateTime?
  descricaoDano      String
  percentualPerda    Int
  statusInicial      StatusInicialAgro @default(EM_ANALISE)
  statusFinal        StatusFinalAgro?
  valorEstimadoPerda Float
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt

  @@index([numeroOcorrencia])
  @@index([produtor])
  @@index([statusInicial])
  @@index([statusFinal])
  @@index([eventoClimatico])
  @@map("ocorrencia_agricola")
}

model Estacoes {
  id             Int      @id @default(autoincrement())
  codestacao     String   @unique
  id_tipoestacao Int
  nome           String
  createdAt      DateTime @default(now())

  @@map("estacoes")
}

model DadosCemadenStations {
  id         Int      @id @default(autoincrement())
  acc120hr   Float?
  acc12hr    Float?
  acc1hr     Float?
  acc24hr    Float?
  acc3hr     Float?
  acc48hr    Float?
  acc6hr     Float?
  acc72hr    Float?
  acc96hr    Float?
  codestacao String
  codibge    Int
  datahora   DateTime
  id_estacao Int
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([codestacao, datahora])
  @@map("dados_cemaden_stations")
}